<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Number Guessing Game</title>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Number Guessing Game" />
    <meta
      name="description"
      content="A fun number guessing game with multiple levels"
    />
    <meta name="keywords" content="game, number guess, puzzle, brain teaser" />
    <meta name="author" content="Aashutosh" />

    <!-- PWA Meta Tags -->
    <meta
      name="theme-color"
      content="#4d6fed"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#2b4ecf"
      media="(prefers-color-scheme: dark)"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Guess Number" />

    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Guess Number" />

    <!-- Microsoft Meta Tags -->
    <meta name="msapplication-TileColor" content="#4d6fed" />
    <meta name="msapplication-TileImage" content="assets/icons/icon-144.png" />
    <meta name="msapplication-config" content="browserconfig.xml" />

    <!-- Combined Social Media Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Number Guessing Game" />
    <meta
      property="og:description"
      content="A fun number guessing game with multiple levels"
    />
    <meta property="og:image" content="assets/screenshots/game-1.png" />
    <meta property="twitter:card" content="summary_large_image" />

    <!-- Icons -->
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

    <!-- Essential Apple Touch Icons (reduced set) -->
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="assets/icons/icon-72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="assets/icons/icon-144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="192x192"
      href="assets/icons/icon-192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="512x512"
      href="assets/icons/icon-512.png"
    />

    <!-- Styles - Updated order for better cascade -->
    <link rel="stylesheet" href="css/styles.min.css" />
    <link rel="stylesheet" href="css/modal-fix.css" />
    <link rel="stylesheet" href="css/server-sync.css" />
    <!-- Remove the button-fix.css reference as styling is now in SCSS -->
    <!-- <link rel="stylesheet" href="css/button-fix.css" /> -->
    <!-- Remove the temporary fallback after verifying the compiled CSS works properly -->
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
  </head>
  <body>
    <!-- Side Menu -->
    <div class="side-menu-overlay"></div>
    <nav class="side-menu" id="side-menu">
      <div class="side-menu-header">
        <!-- Close button explicitly placed as first element -->
        <button class="side-menu-close" aria-label="Close menu">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        <!-- No other elements in header to ensure X is on left -->
      </div>

      <!-- Side menu content -->
      <div class="side-menu-content">
        <!-- Theme Toggle button has been moved to settings dropdown -->

        <!-- Settings Dropdown Button -->
        <div class="side-menu-item settings-container">
          <button
            id="settings-button"
            class="side-menu-button settings-toggle"
            aria-label="Game settings"
            aria-expanded="false"
            aria-controls="settings-dropdown"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="3"></circle>
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
              ></path>
            </svg>
            <span>Settings</span>
            <svg
              class="dropdown-chevron"
              xmlns="http://www.w3.org/2000/svg"
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div id="settings-dropdown" class="settings-dropdown">
            <!-- Theme Toggle Option -->
            <div
              class="settings-option"
              id="theme-toggle"
              onclick="window.toggleTheme(); return false;"
            >
              <div class="theme-option-content">
                <div class="icon-container">
                  <!-- Moon icon (inline SVG) -->
                  <svg
                    id="moon-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M21 12.79A9 9 0 1 1 11.21 3 A7 7 0 0 0 21 12.79z"
                    ></path>
                  </svg>

                  <!-- Sun icon (inline SVG) -->
                  <svg
                    id="sun-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                  </svg>
                </div>
                <span>Theme</span>
              </div>
            </div>

            <!-- Delete Account Button -->
            <div class="settings-option" id="delete-account-btn">
              <div class="theme-option-content">
                <div class="icon-container">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M3 6h18"></path>
                    <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                    <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                  </svg>
                </div>
                <span>Delete Account</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Added Feedback Button -->
        <div class="side-menu-item">
          <button
            id="side-menu-feedback-btn"
            class="side-menu-button"
            aria-label="Send feedback"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
              ></path></svg
            ><span>Send Feedback</span>
          </button>
        </div>

        <!-- Added Buy Me a Coffee Button -->
        <div class="side-menu-item">
          <a
            href="https://www.buymeacoffee.com/Daplixo"
            target="_blank"
            rel="noopener"
            class="side-menu-button"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
              <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
              <line x1="6" y1="1" x2="6" y2="4"></line>
              <line x1="10" y1="1" x2="10" y2="4"></line>
              <line x1="14" y1="1" x2="14" y2="4"></line></svg
            ><span>Buy Me a Coffee</span>
          </a>
        </div>

        <!-- LinkedIn Button, GitHub Button, and Instagram Button sections removed -->
      </div>
    </nav>

    <!-- Game Header with Level, Attempts and Theme Toggle -->
    <header class="game-header">
      <div class="header-left header-item">
        <!-- Improved accessibility for hamburger menu -->
        <button
          id="menu-toggle"
          class="hamburger-menu"
          aria-label="Open menu"
          aria-expanded="false"
          aria-controls="side-menu"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="header-center header-item">
        <!-- Add container to ensure horizontal alignment of game indicators -->
        <div id="game-indicators-container">
          <!-- Game indicators will be inserted here by JS -->
        </div>
      </div>

      <div class="header-right header-item">
        <div id="level-indicator">Level 1</div>
      </div>
    </header>

    <!-- Win & Game Over Notifications -->
    <div id="notifications-container">
      <div id="winNotification"></div>
      <div id="gameOverNotification"></div>
    </div>

    <!-- Remove the standalone attempts counter since it's now in the header -->
    <!-- <div id="attempts-container">
      <p id="attempts"></p>
    </div> -->

    <div id="game-container">
      <!-- Two-column layout for game -->
      <div class="game-layout">
        <!-- Left column with vertical proximity meter (25%) -->
        <div class="proximity-column">
          <div class="proximity-label top">Very Close</div>
          <div id="proximity-container" class="vertical">
            <div id="proximity-meter">
              <div id="proximity-fill"></div>
            </div>
          </div>
          <div class="proximity-label bottom">Far Away</div>
          <!-- Removed the last guess container section entirely -->
        </div>

        <!-- Right column with game UI (75%) -->
        <div class="game-content">
          <!-- Game UI -->
          <div id="game-ui">
            <!-- Removed range info element -->

            <div id="controls">
              <input
                type="text"
                id="userGuess"
                placeholder="Enter your guess"
                autocomplete="off"
                readonly
              />
              <button id="submitGuessBtn">Submit</button>
              <!-- Add error message container -->
              <div class="error-message-container">
                <div id="error-message" class="error-message"></div>
              </div>
            </div>

            <!-- Modified feedback element - hidden by default -->
            <p id="feedback" style="display: none"></p>

            <!-- Past Guesses Section -->
            <div id="past-guesses-container">
              <p id="past-guesses-title">Past Guesses:</p>
              <div id="past-guesses"></div>
            </div>

            <!-- Game Control Buttons -->
            <div class="game-controls">
              <button id="continueBtn" style="display: none">Continue</button>
              <div class="dropdown-container">
                <button id="playAgainBtn">Restart Level</button>
                <div class="dropdown-menu">
                  <div class="dropdown-option" id="resetGameBtn">
                    Reset Game
                  </div>
                </div>
              </div>
              <button id="restartBtn" style="display: none">Restart</button>
            </div>

            <!-- Custom Number Keyboard for Mobile - Improved calculator-style layout -->
            <div id="custom-keyboard">
              <div class="keyboard-row">
                <button class="key-btn" data-key="7">7</button>
                <button class="key-btn" data-key="8">8</button>
                <button class="key-btn" data-key="9">9</button>
              </div>
              <div class="keyboard-row">
                <button class="key-btn" data-key="4">4</button>
                <button class="key-btn" data-key="5">5</button>
                <button class="key-btn" data-key="6">6</button>
              </div>
              <div class="keyboard-row">
                <button class="key-btn" data-key="1">1</button>
                <button class="key-btn" data-key="2">2</button>
                <button class="key-btn" data-key="3">3</button>
              </div>
              <div class="keyboard-row">
                <button class="key-btn key-clear" data-key="clear">
                  Clear
                </button>
                <button class="key-btn" data-key="0">0</button>
                <button class="key-btn key-enter" data-key="enter">
                  Enter
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer - Simplified to only show creator info -->
    <footer class="footer">
      <div class="footer-content">
        <div class="author-info">
          <h3>Created by Aashutosh</h3>
        </div>
      </div>
    </footer>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal-wrapper">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Send Feedback</h2>
        <form
          id="feedbackForm"
          action="https://formsubmit.co/aashugfx@gmail.com"
          method="POST"
        >
          <!-- Anti-spam honeypot field -->
          <input type="text" name="_honey" style="display: none" />

          <!-- Disable captcha -->
          <input type="hidden" name="_captcha" value="false" />

          <!-- Add a subject field for better organization -->
          <input
            type="hidden"
            name="_subject"
            value="Number Guessing Game Feedback"
          />

          <!-- Automatically sort submissions by name -->
          <input type="hidden" name="_template" value="table" />

          <!-- You could add this to clearly identify the source of feedback -->
          <input type="hidden" name="_source" value="game-website" />

          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required />
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-group">
            <label for="message">Message</label>
            <textarea id="message" name="message" required></textarea>
          </div>
          <button type="submit" class="submit-btn">Send Feedback</button>
        </form>
      </div>
    </div>

    <!-- Game Scripts -->
    <!-- Add Initial Profile Setup FIRST to ensure it runs before UserProfileUI -->
    <script type="module" src="js/initialProfileSetup.js"></script>
    <!-- Add our new SyncManager to ensure data is synced with the server -->
    <script type="module" src="js/syncManager.js"></script>
    <!-- Add debugging for profile setup -->
    <script>
      // Debug initial profile setup
      console.log("Index.html: Adding profile setup debug");
      window.checkProfileSetup = function () {
        console.log(
          "Profile setup initialized:",
          !!window.profileSetupInitialized
        );
        console.log(
          "User profile exists:",
          localStorage.getItem("userProfileData") !== null
        );
        console.log("Local storage:", Object.keys(localStorage));
      };
      // Run check after a delay
      setTimeout(window.checkProfileSetup, 2000);
    </script>
    <script type="module" src="js/main.js"></script>
    <script src="js/fix-proximity.js"></script>
    <script src="js/side-menu.js"></script>
    <script src="js/profile.js"></script>
    <!-- Direct menu fix scripts (non-module for immediate execution) -->
    <script src="js/menu-fix.js"></script>
    <script src="js/global-menu-fix.js"></script>
    <script src="js/button-fix.js"></script>
    <script src="js/immediate-button-fix.js"></script>
    <script src="js/force-button-checker.js"></script>

    <!-- Enhanced API connectivity scripts - now using constant API URL -->
    <script type="module" src="js/connectivity-fix.js"></script>
    <script type="module" src="js/db-connection.js"></script>

    <!-- Script to remove any status indicators -->
    <script>
      // Aggressive removal of API status indicators
      (function removeAPIIndicators() {
        // Run immediately
        const removeNow = function () {
          const indicators = [
            document.getElementById("db-status-indicator"),
            document.getElementById("api-status-indicator"),
          ];

          indicators.forEach((indicator) => {
            if (indicator && indicator.parentNode) {
              indicator.parentNode.removeChild(indicator);
            }
          });

          // Also remove any elements with specific classes
          document
            .querySelectorAll(".db-status, .api-status, .status-indicator")
            .forEach((el) => {
              if (el && el.parentNode) {
                el.parentNode.removeChild(el);
              }
            });
        };

        // Run now and after DOM is loaded
        removeNow();
        document.addEventListener("DOMContentLoaded", removeNow);

        // And also after slight delays to catch delayed creations
        setTimeout(removeNow, 500);
        setTimeout(removeNow, 1500);
        setTimeout(removeNow, 3000);
      })();
    </script>

    <!-- Auto-fix for MongoDB connectivity issues -->
    <script type="module" src="js/autofix.js"></script>
    <!-- Debug helper for MongoDB connectivity issues -->
    <script type="module" src="js/debug.js"></script>

    <!-- Form submission script - Optimized to avoid unnecessary code execution -->
    <script>
      // Only add event listener if we're in a development environment
      if (
        window.location.hostname === "localhost" ||
        window.location.hostname === "127.0.0.1"
      ) {
        document
          .getElementById("feedbackForm")
          .addEventListener("submit", function (event) {
            event.preventDefault();

            // Get form data and handle the submission
            const formData = new FormData(this);
            const name = formData.get("name");
            console.log("Form submitted:", Object.fromEntries(formData));

            // Show success message and close modal
            alert("Thank you for your feedback, " + name + "!");
            document.getElementById("feedbackModal").style.display = "none";

            // Reset form
            this.reset();
          });
      }
    </script>

    <!-- Direct script to make side menu feedback button functional -->
    <script>
      // Make sure this runs after DOM is ready
      document.addEventListener("DOMContentLoaded", function () {
        const sideMenuFeedbackBtn = document.getElementById(
          "side-menu-feedback-btn"
        );
        const feedbackModal = document.getElementById("feedbackModal");
        const closeModalBtn = document.querySelector(".close-modal");

        if (sideMenuFeedbackBtn && feedbackModal) {
          console.log("Feedback button and modal found, adding click handler");

          sideMenuFeedbackBtn.addEventListener("click", function () {
            console.log("Side menu feedback button clicked");

            // Close the side menu
            const sideMenu = document.querySelector(".side-menu");
            const sideMenuOverlay =
              document.querySelector(".side-menu-overlay");
            const menuToggle = document.getElementById("menu-toggle");

            if (sideMenu) sideMenu.classList.remove("active");
            if (sideMenuOverlay) sideMenuOverlay.classList.remove("active");
            if (menuToggle) menuToggle.classList.remove("active");
            document.body.classList.remove("menu-open");

            // Open feedback modal - direct approach
            feedbackModal.style.display = "flex";
            feedbackModal.style.visibility = "visible";
            feedbackModal.style.opacity = "1";
            feedbackModal.style.pointerEvents = "auto";
            feedbackModal.classList.add("active");
            window.isModalOpen = true;

            console.log("Feedback modal should be open now");
          });
        } else {
          console.error("Feedback button or modal not found!", {
            button: sideMenuFeedbackBtn,
            modal: feedbackModal,
          });
        }

        // Add click handler for the close button
        if (closeModalBtn) {
          closeModalBtn.addEventListener("click", function () {
            console.log("Close button clicked");
            closeModal();
          });

          // Also close when clicking outside the modal content
          feedbackModal.addEventListener("click", function (e) {
            if (e.target === feedbackModal) {
              closeModal();
            }
          });
        }

        // Global close modal function
        function closeModal() {
          if (feedbackModal) {
            feedbackModal.style.display = "none";
            feedbackModal.style.visibility = "hidden";
            feedbackModal.style.opacity = "0";
            feedbackModal.style.pointerEvents = "none";
            feedbackModal.classList.remove("active");
            window.isModalOpen = false;
            console.log("Modal closed");
          }
        }

        // Close with ESC key
        document.addEventListener("keydown", function (e) {
          if (
            e.key === "Escape" &&
            feedbackModal.classList.contains("active")
          ) {
            closeModal();
          }
        });
      });
    </script>

    <!-- Debugging script -->
    <script>
      console.log("==== INITIAL PAGE LOAD DEBUG ====");
      // Check if hamburger menu element exists
      const hamburgerMenu = document.getElementById("menu-toggle");
      console.log("Hamburger menu element exists:", !!hamburgerMenu);

      if (hamburgerMenu) {
        console.log(
          "Hamburger dimensions:",
          "width:",
          hamburgerMenu.offsetWidth,
          "height:",
          hamburgerMenu.offsetHeight
        );

        // Check computed styles
        const style = window.getComputedStyle(hamburgerMenu);
        console.log(
          "Hamburger computed styles:",
          "display:",
          style.display,
          "visibility:",
          style.visibility,
          "opacity:",
          style.opacity,
          "position:",
          style.position
        );

        // Check if lines exist
        const lines = hamburgerMenu.querySelectorAll(".hamburger-line");
        console.log("Hamburger lines found:", lines.length);

        // Check line styles if they exist
        if (lines.length > 0) {
          const lineStyle = window.getComputedStyle(lines[0]);
          console.log(
            "First line computed styles:",
            "display:",
            lineStyle.display,
            "background-color:",
            lineStyle.backgroundColor,
            "height:",
            lineStyle.height,
            "width:",
            lineStyle.width
          );
        }
      }

      // Check if CSS variables are set correctly
      const rootStyle = window.getComputedStyle(document.documentElement);
      console.log(
        "CSS variables:",
        "--text-color:",
        rootStyle.getPropertyValue("--text-color"),
        "--hamburger-color:",
        rootStyle.getPropertyValue("--hamburger-color")
      );
    </script>

    <!-- Emergency Menu Toggle Fix -->
    <script>
      // Direct menu toggle script - guaranteed to fix menu button
      document.addEventListener("DOMContentLoaded", function () {
        // Apply direct event handling to menu toggle
        const menuToggle = document.getElementById("menu-toggle");
        const sideMenu = document.querySelector(".side-menu");
        const sideMenuOverlay = document.querySelector(".side-menu-overlay");

        if (menuToggle && sideMenu && sideMenuOverlay) {
          console.log("Adding last-resort menu toggle handler");

          // Add direct onclick handler
          menuToggle.onclick = function (e) {
            e.preventDefault();
            console.log("EMERGENCY: Menu toggle button clicked");

            // Toggle side menu and overlay
            if (sideMenu.classList.contains("active")) {
              sideMenu.classList.remove("active");
              sideMenuOverlay.classList.remove("active");
              menuToggle.classList.remove("active");
              document.body.classList.remove("menu-open");
            } else {
              sideMenu.classList.add("active");
              sideMenuOverlay.classList.add("active");
              menuToggle.classList.add("active");
              document.body.classList.add("menu-open");
            }
          };

          // Make sure the menu button is properly styled
          menuToggle.style.cursor = "pointer";
        }
      });
    </script>
  </body>
</html>
